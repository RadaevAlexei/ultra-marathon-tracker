<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç —Ä–µ–∂–∏–º–∞ LIVE</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 8px; }
        .status { font-weight: bold; }
        .live { color: green; }
        .pre { color: red; }
        .info { background: #f0f0f0; padding: 10px; margin: 10px 0; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç —Ä–µ–∂–∏–º–∞ LIVE</h1>
    
    <div class="test-section">
        <h2>üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ</h2>
        <div id="currentStatus" class="status">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        <div class="info">
            <strong>–í—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞:</strong> <span id="startTime">--</span><br>
            <strong>–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è:</strong> <span id="currentTime">--</span><br>
            <strong>–ü—Ä–æ—à–ª–æ –≤—Ä–µ–º–µ–Ω–∏:</strong> <span id="elapsedTime">--</span>
        </div>
    </div>

    <div class="test-section">
        <h2>üéØ –ë–ª–æ–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</h2>
        <div class="info">
            <strong>–ë–ª–æ–∫ "–î–æ —Å—Ç–∞—Ä—Ç–∞":</strong> <span id="untilStartStatus" class="status">--</span><br>
            <strong>–ë–ª–æ–∫ "–ü—Ä–æ—à–ª–æ –≤—Ä–µ–º–µ–Ω–∏":</strong> <span id="elapsedStatus" class="status">--</span><br>
            <strong>–°–µ–∫—Ü–∏—è "–ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–±–µ–≥–∞":</strong> <span id="progressStatus" class="status">--</span><br>
            <strong>–ë–µ–π–¥–∂ "LIVE":</strong> <span id="liveBadgeStatus" class="status">--</span>
        </div>
    </div>

    <div class="test-section">
        <h2>üì± –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</h2>
        <a href="http://localhost:3000/" target="_blank" style="background: #007bff; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px;">
            üöÄ –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
        </a>
    </div>

    <script>
        // –ö–æ–ø–∏—Ä—É–µ–º –ª–æ–≥–∏–∫—É –∏–∑ app.js –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        function makeLocalRaceTimes() {
            // –î–ï–ú–û –†–ï–ñ–ò–ú LIVE: –ó–∞–±–µ–≥ –Ω–∞—á–∞–ª—Å—è 2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥ (8:00) –∏ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è —á–µ—Ä–µ–∑ 22 —á–∞—Å–∞
            const now = new Date();
            const startTime = new Date(now.getTime() - 2 * 60 * 60 * 1000); // 2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥
            const endTime = new Date(now.getTime() + 22 * 60 * 60 * 1000); // 22 —á–∞—Å–∞ –≤–ø–µ—Ä–µ–¥
            
            return { start: startTime, end: endTime };
        }

        function formatHHMMSS(ms) {
            const totalSec = Math.max(0, Math.floor(ms / 1000));
            const h = Math.floor(totalSec / 3600);
            const m = Math.floor((totalSec % 3600) / 60);
            const s = totalSec % 60;
            return `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
        }

        function updateTestStatus() {
            const { start: RACE_START, end: RACE_END } = makeLocalRaceTimes();
            const now = new Date();
            const elapsedMs = Math.min(RACE_END - RACE_START, Math.max(0, now - RACE_START));
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
            document.getElementById('startTime').textContent = RACE_START.toLocaleString('ru-RU');
            document.getElementById('currentTime').textContent = now.toLocaleString('ru-RU');
            document.getElementById('elapsedTime').textContent = formatHHMMSS(elapsedMs);
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∂–∏–º
            const isLive = now >= RACE_START && now < RACE_END;
            const statusEl = document.getElementById('currentStatus');
            
            if (isLive) {
                statusEl.textContent = 'üü¢ –†–ï–ñ–ò–ú LIVE (–∑–∞–±–µ–≥ –∏–¥–µ—Ç)';
                statusEl.className = 'status live';
            } else if (now < RACE_START) {
                statusEl.textContent = 'üî¥ –†–ï–ñ–ò–ú –î–û –°–¢–ê–†–¢–ê (–æ–∂–∏–¥–∞–Ω–∏–µ)';
                statusEl.className = 'status pre';
            } else {
                statusEl.textContent = '‚ö´ –ó–ê–ë–ï–ì –ó–ê–í–ï–†–®–ï–ù';
                statusEl.className = 'status';
            }
            
            // –°–∏–º—É–ª–∏—Ä—É–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–ª–æ–∫–æ–≤
            if (isLive) {
                document.getElementById('untilStartStatus').textContent = '‚ùå –°–∫—Ä—ã—Ç';
                document.getElementById('elapsedStatus').textContent = '‚úÖ –ü–æ–∫–∞–∑–∞–Ω';
                document.getElementById('progressStatus').textContent = '‚úÖ –ü–æ–∫–∞–∑–∞–Ω';
                document.getElementById('liveBadgeStatus').textContent = '‚úÖ –ü–æ–∫–∞–∑–∞–Ω';
            } else {
                document.getElementById('untilStartStatus').textContent = '‚úÖ –ü–æ–∫–∞–∑–∞–Ω';
                document.getElementById('elapsedStatus').textContent = '‚ùå –°–∫—Ä—ã—Ç';
                document.getElementById('progressStatus').textContent = '‚ùå –°–∫—Ä—ã—Ç';
                document.getElementById('liveBadgeStatus').textContent = '‚ùå –°–∫—Ä—ã—Ç';
            }
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
        updateTestStatus();
        setInterval(updateTestStatus, 1000);
    </script>
</body>
</html>
