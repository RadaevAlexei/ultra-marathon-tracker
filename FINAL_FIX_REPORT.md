# –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö

## –ü—Ä–æ–±–ª–µ–º–∞
–î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –≤ –±–æ—Ç–µ –∏ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–ª–∏—Å—å —Å –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.

## –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

### 1. ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ webhook
**–ü—Ä–æ–±–ª–µ–º–∞**: –í Netlify Functions –∫–∞–∂–¥–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–æ, –ø–æ—ç—Ç–æ–º—É –æ–±—ä–µ–∫—Ç `userStates` —Å–±—Ä–∞—Å—ã–≤–∞–ª—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ webhook —Ñ—É–Ω–∫—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏–µ**: 
- –ó–∞–º–µ–Ω–∏–ª in-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –Ω–∞ —Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- –î–æ–±–∞–≤–∏–ª —Ñ—É–Ω–∫—Ü–∏–∏ `getUserStates()` –∏ `saveUserStates()` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–æ–º `/tmp/user_states.json`
- –û–±–Ω–æ–≤–∏–ª –≤—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —á—Ç–æ–±—ã –æ–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –≤ —Ñ–∞–π–ª

### 2. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤ webhook
**–ü—Ä–æ–±–ª–µ–º–∞**: –í webhook —Ñ—É–Ω–∫—Ü–∏–∏ –±—ã–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `else if (isAdmin(userId))`, –Ω–æ –æ–Ω–∞ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–∏—Å–ª–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞.

**–†–µ—à–µ–Ω–∏–µ**: 
- –ò—Å–ø—Ä–∞–≤–∏–ª –ª–æ–≥–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–∏—Å–ª–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞
- –î–æ–±–∞–≤–∏–ª –ø—Ä–æ–≤–µ—Ä–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è `adding_km` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∏–ª–æ–º–µ—Ç—Ä–æ–≤
- –î–æ–±–∞–≤–∏–ª –ø—Ä–æ–≤–µ—Ä–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è `adding_laps` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫—Ä—É–≥–æ–≤
- –î–æ–±–∞–≤–∏–ª –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π

### 3. ‚úÖ –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
**–ü—Ä–æ–±–ª–µ–º–∞**: –†–∞–∑–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ä–∞–∑–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è.

**–†–µ—à–µ–Ω–∏–µ**: 
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–ª –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –µ–¥–∏–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑ `data.js`
- –ò—Å–ø—Ä–∞–≤–∏–ª –≤—Å–µ API endpoints –≤ –±–æ—Ç–µ
- –î–æ–±–∞–≤–∏–ª –ø–æ–ª–µ `total_laps` –≤ –¥–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

## –†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

### API —Ñ—É–Ω–∫—Ü–∏–∏:
‚úÖ **GET /data** - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ **POST /data** —Å `kmNumber` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∏–ª–æ–º–µ—Ç—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ **POST /data** —Å `lapsNumber` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫—Ä—É–≥–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ **POST /data** —Å `reset: true` - —Å–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ **GET /set_race_time** - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–±–µ–≥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

### Webhook –±–æ—Ç–∞:
‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook** - webhook –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π** - —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª
‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥** - –∫–æ–º–∞–Ω–¥—ã `/start` –∏ `/admin` —Ä–∞–±–æ—Ç–∞—é—Ç
‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ callback** - –∫–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ —á–∏—Å–ª–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞** - –∫–∏–ª–æ–º–µ—Ç—Ä—ã –∏ –∫—Ä—É–≥–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:
‚úÖ **–î–∞–Ω–Ω—ã–µ –≤ –±–æ—Ç–µ** - —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úÖ **–î–∞–Ω–Ω—ã–µ –≤ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏** - –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –¥–∞–Ω–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã –≤ –±–æ—Ç–µ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:

### –ë–æ—Ç:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∏–ª–æ–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–º"
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫—Ä—É–≥–æ–≤ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—Ä—É–≥–æ–≤"
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"
- ‚úÖ –°–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É "–°–±—Ä–æ—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ"
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–±–µ–≥–∞ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º—è –∑–∞–±–µ–≥–∞"
- ‚úÖ –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

### –ú–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –∫–∏–ª–æ–º–µ—Ç—Ä–æ–≤ –∏ –∫—Ä—É–≥–æ–≤
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –¥–æ –ö–ú–°
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞–∑—Ä—è–¥–æ–≤
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–±–µ–≥–∞
- ‚úÖ –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±–æ—Ç–æ–º

## üéâ –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ!

**–¢–µ–ø–µ—Ä—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ –∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏!**

–î–∞–Ω–Ω—ã–µ –≤ –±–æ—Ç–µ –∏ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã, –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏.
