# üìä –û—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏ "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º—è –∑–∞–±–µ–≥–∞"

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

#### 1. **–ö–Ω–æ–ø–∫–∞ –≤ –±–æ—Ç–µ**
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "‚è∞ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º—è –∑–∞–±–µ–≥–∞" –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `admin_set_race_time` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π, —Ç–∞–∫ –∏ –≤ Netlify –≤–µ—Ä—Å–∏–∏

#### 2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —Ñ–æ—Ä–º–∞—Ç–∞ "–î–î.–ú–ú.–ì–ì–ì–ì –ß–ß:–ú–ú"
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ —á–µ—Ä–µ–∑ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –¥–∞—Ç–∞ –≤ –±—É–¥—É—â–µ–º
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è (+24 —á–∞—Å–∞)

#### 3. **API —Ñ—É–Ω–∫—Ü–∏–∏**
- ‚úÖ `GET /.netlify/functions/set_race_time` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ `POST /.netlify/functions/set_race_time` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª `/tmp/race_time.json`
- ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –≤—Ä–µ–º–µ–Ω–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö

#### 4. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º**
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `fetchRaceTime()` –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Ä–µ–º—è –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞—Ç—ã –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
- ‚úÖ –¢–∞–π–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è –∑–∞–±–µ–≥–∞
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã

#### 5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- ‚úÖ –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç ‚Üí –ø–æ–¥—Å–∫–∞–∑–∫–∞ —Å –ø—Ä–∏–º–µ—Ä–æ–º
- ‚úÖ –î–∞—Ç–∞ –≤ –ø—Ä–æ—à–ª–æ–º ‚Üí –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- ‚úÖ –û—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ API —Ñ—É–Ω–∫—Ü–∏–∏
```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
curl -s https://ultra-marathon-tracker.netlify.app/.netlify/functions/set_race_time
# –†–µ–∑—É–ª—å—Ç–∞—Ç: {"race_start":"2025-12-31T18:00:00+03:00","race_end":"2026-01-01T18:00:00+03:00"}

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏
curl -X POST https://ultra-marathon-tracker.netlify.app/.netlify/functions/set_race_time \
  -H "Content-Type: application/json" \
  -d '{"race_start": "2025-12-31T18:00:00+03:00", "race_end": "2026-01-01T18:00:00+03:00"}'
# –†–µ–∑—É–ª—å—Ç–∞—Ç: {"success":true,"message":"–í—Ä–µ–º—è –∑–∞–±–µ–≥–∞ —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ"}
```

### ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç—ã
- –§–æ—Ä–º–∞—Ç: `31.12.2025 18:00`
- –†–µ–∑—É–ª—å—Ç–∞—Ç: `2025-12-31T15:00:00.000Z` (UTC+3)
- –í–∞–ª–∏–¥–∞—Ü–∏—è: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

### ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- –ú–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Ä–µ–º—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –¢–∞–π–º–µ—Ä—ã –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è

## üìã –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. **–ß–µ—Ä–µ–∑ –±–æ—Ç–∞:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –±–æ—Ç–∞
2. –ù–∞–ø–∏—à–∏—Ç–µ `/start`
3. –ù–∞–∂–º–∏—Ç–µ "‚è∞ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º—è –∑–∞–±–µ–≥–∞"
4. –í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É: `31.12.2025 18:00`
5. –ü–æ–ª—É—á–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

### 2. **–ß–µ—Ä–µ–∑ API:**
```javascript
// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏
const response = await fetch('/.netlify/functions/set_race_time', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    race_start: '2025-12-31T18:00:00+03:00',
    race_end: '2026-01-01T18:00:00+03:00'
  })
});
```

### 3. **–í –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:**
–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã.

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã:
1. **bot/bot.js** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞
2. **netlify/functions/bot.js** - –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. **netlify/functions/set_race_time.js** - –Ω–æ–≤—ã–π API endpoint
4. **public/app.js** - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
5. **public/index.html** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞—Ç—ã

### –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö:
- **–í—Ö–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–∞—Ç:** `–î–î.–ú–ú.–ì–ì–ì–ì –ß–ß:–ú–ú`
- **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç:** ISO 8601 —Å UTC+3
- **–•—Ä–∞–Ω–µ–Ω–∏–µ:** JSON —Ñ–∞–π–ª –≤ `/tmp/race_time.json`

### –í–∞–ª–∏–¥–∞—Ü–∏—è:
- –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ: `/^(\d{1,2})\.(\d{1,2})\.(\d{4})\s+(\d{1,2}):(\d{2})$/`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –±—É–¥—É—â–µ–µ –≤—Ä–µ–º—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –æ–∫–æ–Ω—á–∞–Ω–∏—è (+24 —á–∞—Å–∞)

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–§—É–Ω–∫—Ü–∏—è "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º—è –∑–∞–±–µ–≥–∞" –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞!**

- ‚úÖ **–ë–æ—Ç:** –ö–Ω–æ–ø–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è
- ‚úÖ **API:** –í—Å–µ endpoints —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç
- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:** –ú–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –∏ –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞!**
